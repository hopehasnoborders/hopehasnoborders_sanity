<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title | default("Hope Has No Borders") }}</title>
  <meta name="description" content="{{ description | default("A grassroots response to the humanitarian crisis in Denver.") }}" />
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
             sans: ['Inter', 'sans-serif'],
             serif: ['Playfair Display', 'serif']
          },
          colors: {
             orange: { 600: '#ea580c', 50: '#fff7ed' },
             yarrow: { DEFAULT: '#FFB81C', 600: '#E5A519' }
          }
        }
      }
    };
  </script>
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | url }}" />
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.4.0/default/snipcart.css" />
</head>
<body class="antialiased selection:bg-yarrow/30 selection:text-black {{ bodyClass }}">
  
  {% if settings.show_announcement %}
  <div class="bg-yarrow text-black py-2 px-4 text-center text-xs font-bold uppercase tracking-widest relative z-50">
    <div class="container mx-auto flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-4">
      <span>{{ i18n[lang].announcement_text }}</span>
      {% if i18n[lang].announcement_link_url %}
      <a href="{{ i18n[lang].announcement_link_url }}" class="underline hover:no-underline transition-all">{{ i18n[lang].announcement_link_text }} â†’</a>
      {% endif %}
    </div>
  </div>
  {% endif %}

  {% include "partials/nav.njk" %}

  <main class="flex-grow min-h-screen">
    {{ content | safe }}
  </main>

  {% include "partials/footer.njk" %}

  <script src="{{ '/assets/js/main.js' | url }}"></script>
  
  <script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "{{ '/admin/' | url }}";
        });
      }
    });
  }
  </script>
  <div hidden id="snipcart" data-api-key="MDFlMjM2OWMtYWZkMy00NTk2LTkyYTAtYzQ1ZDYzMDQ4ZDVjNjM5MDM5Njk0Mzk3Mzg0NjU1"></div>
  <script async src="https://cdn.snipcart.com/themes/v3.4.0/default/snipcart.js"></script>
</body>
</html>
