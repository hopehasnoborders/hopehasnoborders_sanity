[build]
  base = "web"
  command = "npm run build"
  publish = ".next"

[dev]
  command = "npm run dev"
  targetPort = 3000
  framework = "#custom"
  autoLaunch = false

[build.environment]
  NODE_VERSION = "20"
  NEXT_PUBLIC_SANITY_PROJECT_ID = "fnj6du1o"
  NEXT_PUBLIC_SANITY_DATASET = "production"

# Next.js App Router requires the @netlify/plugin-nextjs
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Redirects for pretty URLs
[[redirects]]
  from = "/studio"
  to = "https://hopeborders.sanity.studio"
  status = 301
  force = true
